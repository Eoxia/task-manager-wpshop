window.eoxiaJS.taskManagerFrontendWPShop = {};
window.eoxiaJS.taskManagerBackendWPShop = {};

window.eoxiaJS.taskManagerBackendWPShop.adminBar = {};

window.eoxiaJS.taskManagerBackendWPShop.adminBar.init = function() {
	window.eoxiaJS.taskManagerBackendWPShop.adminBar.event();
};

window.eoxiaJS.taskManagerBackendWPShop.adminBar.event = function() {
	jQuery( document ).on( 'click', '.popup.popup-quick-task .button.close', window.eoxiaJS.taskManagerBackendWPShop.adminBar.closePopup );
	jQuery( document ).on( 'keyup', '.popup.popup-quick-task textarea, .popup.popup-quick-task input[name="time"]', window.eoxiaJS.taskManagerBackendWPShop.adminBar.triggerCreate );

};

window.eoxiaJS.taskManagerBackendWPShop.adminBar.loadedPopupQuickTask = function( triggeredElement, response ) {
	jQuery( '.popup.popup-quick-task .container.loading' ).removeClass( 'loading' );
	jQuery( '.popup.popup-quick-task .container .content' ).html( response.data.view );

	jQuery( '.popup.popup-quick-task .container .content textarea' ).focus();
};

window.eoxiaJS.taskManagerBackendWPShop.adminBar.createdQuickTask = function( triggeredElement, response ) {
	jQuery( '.popup.popup-quick-task .container .content' ).html( response.data.view );
};

window.eoxiaJS.taskManagerBackendWPShop.adminBar.closePopup = function( event ) {
	jQuery( '.popup.popup-quick-task' ).removeClass( 'active' );
};

window.eoxiaJS.taskManagerBackendWPShop.adminBar.triggerCreate = function( event ) {
	if ( event.ctrlKey && 13 === event.keyCode ) {
		jQuery( this ).closest( '.popup.popup-quick-task' ).find( '.action-input' ).click();
	}
};

/**
 * Initialise l'objet "indicator" ainsi que la méthode "init" obligatoire pour la bibliothèque EoxiaJS.
 *
 * @since 1.2.0
 * @version 1.2.0
 */
window.eoxiaJS.taskManagerBackendWPShop.indicator = {};
window.eoxiaJS.taskManagerBackendWPShop.indicator.init = function() {
};

/**
 * Le callback en cas de réussite à la requête Ajax "load_indicator_activity".
 *
 * @param  {HTMLDivElement} triggeredElement  L'élement HTML déclenchant la requête Ajax.
 * @param  {Object}         response          Les données renvoyées par la requête Ajax.
 * @return {void}
 *
 * @since 1.2.0
 * @version 1.2.0
 */
window.eoxiaJS.taskManagerBackendWPShop.indicator.loadIndicatorActivitySuccess = function( triggeredElement, response ) {
	jQuery( '#tm-indicator-support .inside' ).html( response.data.view );
};

/**
 * Le callback en cas de réussite à la requête Ajax "load_indicator_support".
 *
 * @param  {HTMLDivElement} triggeredElement  L'élement HTML déclenchant la requête Ajax.
 * @param  {Object}         response          Les données renvoyées par la requête Ajax.
 * @return {void}
 *
 * @since 1.2.0
 * @version 1.2.0
 */
window.eoxiaJS.taskManagerBackendWPShop.indicator.loadIndicatorSupportSuccess = function( triggeredElement, response ) {
	jQuery( '#tm-indicator-support .inside' ).html( response.data.view );
};
